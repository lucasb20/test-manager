{% extends 'base.html' %}

{% block content %}
<h2>Test Plan</h2>

<p><strong>Name:</strong> {{ testplan.name }}</p>
<p><strong>Description:</strong> {{ testplan.description }}</p>
<p><strong>Milestone:</strong> {{ testplan.milestone }}</p>
<p><strong>Platform:</strong> {{ testplan.platform }}</p>
<p><strong>Created At:</strong> {{ testplan.created_at | format_datetime }}</p>
<p><strong>Updated At:</strong> {{ testplan.updated_at | format_datetime }}</p>

<form action="{{ url_for('testplan.delete', testplan_id=testplan.id) }}" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this test plan?');">
    <div class="mb-3">
        <a href="{{ url_for('testexec.index', testplan_id=testplan.id) }}" class="btn btn-info">Test Execution</a>
        <a href="{{ url_for('testplan.associate', testplan_id=testplan.id) }}" class="btn btn-info">Associate Test Cases</a>
    </div>
    <div class="mb-3">
        <a href="{{ url_for('testplan.edit', testplan_id=testplan.id) }}" class="btn btn-secondary">Edit</a>
        <button type="submit" class="btn btn-danger">Delete</button>
        <a href="{{ url_for('testplan.index') }}" class="btn btn-secondary">Back to List</a>
    </div>
</form>

{% if testcases %}
<h3 class="mt-3">Associated Test Cases</h3>
    <div class="list-group">
    {% for testcase in testcases %}
        <a href="{{ url_for('testcase.detail', testcase_id=testcase.id) }}" class="list-group-item list-group-item-action">{{ testcase.code_with_prefix }} - {{ testcase.title }}</a>
    {% endfor %}
    </div>
{% else %}
    <p>No associated test cases.</p>
{% endif %}
{% endblock %}