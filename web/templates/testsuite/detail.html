{% extends 'base.html' %}

{% block content %}
<h2>Test Suite</h2>

<p><strong>Name:</strong> {{ testsuite.name }}</p>
<p><strong>Description:</strong> {{ testsuite.description }}</p>
<p><strong>Total Test Cases:</strong> {{ tscs | length }}</p>
<p><strong>Created At:</strong> {{ testsuite.created_at | format_datetime }}</p>
<p><strong>Updated At:</strong> {{ testsuite.updated_at | format_datetime }}</p>

<form action="{{ url_for('testsuite.delete', testsuite_id=testsuite.id) }}" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this test suite?');">
	<div class="mb-3">
		<a href="{{ url_for('testrun.create', testsuite_id=testsuite.id) }}" class="btn btn-primary">Start Test Run</a>
		<a href="{{ url_for('testrun.previous', testsuite_id=testsuite.id) }}" class="btn btn-info">View Previous Runs</a>
	</div>
	<div class="mb-3">
		<a href="{{ url_for('testsuite.edit', testsuite_id=testsuite.id) }}" class="btn btn-secondary">Edit</a>
		<button type="submit" class="btn btn-danger">Delete</button>
		<a href="{{ url_for('testsuite.index') }}" class="btn btn-secondary">Back to List</a>
	</div>
</form>

{% if tscs %}
<h3 class="mt-3">Associated Test Cases</h3>
<table class="table">
	<thead class="table-dark table-striped table-bordered mt-3">
		<tr>
			<th>Order</th>
			<th>ID</th>
			<th>Title</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody>
		{% for tsc in tscs %}
		<tr>
			<td>{{ loop.index }}</td>
			<td>{{ tsc.testcase_code }}</td>
			<td><a href="{{ url_for('testcase.detail', testcase_id=tsc.test_case_id) }}">{{ tsc.testcase_title }}</a></td>
			<td>
				{% if loop.index > 1 %}
				<form method="post" action="{{ url_for('testsuite.change_order', testsuitecase_id1=tsc.id, testsuitecase_id2=tscs[loop.index0 - 1].id) }}">
					<button type="submit" class="btn btn-sm btn-outline-primary">Move Up</button>
				</form>
				{% endif %}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% else %}
<p>No associated test cases.</p>
{% endif %}
{% endblock %}
