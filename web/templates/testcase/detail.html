{% extends 'base.html' %}

{% block content %}
<h2>Test Case</h2>

<p><strong>ID:</strong> {{ testcase.code_with_prefix }}</p>
<p><strong>Title:</strong> {{ testcase.title }}</p>
<p><strong>Preconditions:</strong> {{ testcase.preconditions }}</p>
<p><strong>Steps:</strong> {{ testcase.steps | replace('\n','<br/>') | safe }}</p>
<p><strong>Expected Result:</strong> {{ testcase.expected_result }}</p>
<p><strong>Type:</strong> {{ testcase.functional }}</p>
<p><strong>Automation:</strong> {{ testcase.automation }}</p>
<p><strong>Created At:</strong> {{ testcase.created_at | format_datetime }}</p>
<p><strong>Updated At:</strong> {{ testcase.updated_at | format_datetime }}</p>

<form action="{{ url_for('testcase.delete', testcase_id=testcase.id) }}" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this test case?');">
    <a href="{{ url_for('testcase.edit', testcase_id=testcase.id) }}" class="btn btn-secondary">Edit</a>
    <button type="submit" class="btn btn-danger">Delete</button>
    <a href="{{ url_for('testcase.associate', testcase_id=testcase.id) }}" class="btn btn-primary">Associate Requirements</a>
    <a href="{{ url_for('testcase.index') }}" class="btn btn-secondary">Back to List</a>
</form>

{% if requirements %}
<h3 class="mt-3">Associated Requirements</h3>

<div class="list-group">
{% for requirement in requirements %}
    <a href="{{ url_for('requirement.detail', requirement_id=requirement.id) }}" class="list-group-item list-group-item-action">{{ requirement.code_with_prefix }} - {{ requirement.title }}</a>
{% endfor %}
</div>
{% endif %}
{% endblock %}